- last_response = current_user.organization.data_responses.last
- current_response = current_user.current_data_response
- last_response_path = last_response ? edit_response_path(last_response) : new_response_path
- current_projects_url = current_response ? edit_response_workplan_path(current_response, :spend) : last_response_path
- current_edit_response_url = current_response ? edit_response_path(current_response) : last_response_path
- current_response_url = current_response ? response_path(current_response) : last_response_path
- current_review_response_url = current_response ? review_response_path(current_response) : last_response_path

#main-nav
  .wrapper
    %ul
      %li.home_tab
        %a{:href => user_dashboard_path(current_user), :class =>  (controller.class == Reporter::DashboardController ? 'active' : nil)}
          %span Home
      %li= link_to 'Settings', current_edit_response_url, :class => (controller.class == ResponsesController && ['new', 'edit', 'create', 'update'].include?(controller.action_name) ? "active" : nil)
      %li= link_to 'Projects', current_projects_url, :class => ([ProjectsController, ActivitiesController, OtherCostsController, CodeAssignmentsController, ClassificationsController, WorkplansController].include?(controller.class) ? "active" : nil)
      %li= link_to 'Review', current_response_url, :class => (controller.class == ResponsesController && controller.action_name == "show" ? "active" : '')
      %li= link_to 'Submit', current_review_response_url, :class => (controller.class == ResponsesController && ["review", "submit"].include?(controller.action_name) ? "active" : '')
      %li= link_to 'Reports', reporter_reports_path, :class => ([Reporter::ReportsController, Reports::DistrictsController, Reports::Districts::ActivitiesController, Reports::Districts::OrganizationsController, Reports::CountriesController, Reports::Countries::OrganizationsController, Reports::Countries::ActivitiesController].include?(controller.class) ? 'active' : nil)